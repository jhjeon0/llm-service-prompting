import os
import dspy


class CreateEvaluation(dspy.Signature):
    """Given context is a system prompt for a generative model.
    Create the most efficient evaluation criteria to assess the responses generated by the model based on this context.
    """

    context = dspy.InputField(desc="context")
    answer = dspy.OutputField(desc="Evaluation item")


def evaluation_agent(context):
    turbo = dspy.OpenAI(model="gpt-4o", api_key=os.getenv("OPENAI_API_KEY"))
    dspy.settings.configure(lm=turbo)
    create_evaluation = dspy.ChainOfThought(CreateEvaluation)

    pred = create_evaluation(context=context)
    return pred.answer


context = "주어진 context에서 검색엔진에 알맞은 검색어를 한개만 추출하라."

evaluation_agent(context)
